<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å®¶å¸¸èœæ™ºèƒ½æ¨èåŠ©æ‰‹</title>
<style>
  body {font-family: "Microsoft YaHei", sans-serif;background-color: #fff8f0;color: #333;margin: 0;padding: 20px;}
  h1 {text-align: center;color: #d84315;}
  .section {margin-top: 20px;}
  .button-group {display: flex;flex-wrap: wrap;gap: 10px;justify-content: center;}
  button {background-color: #ff7043;color: white;border: none;border-radius: 8px;padding: 10px 16px;font-size: 16px;cursor: pointer;}
  button.selected {background-color: #d84315;}
  .menu-list, .result-list {margin-top: 15px;text-align: left;background: #fff;padding: 15px;border-radius: 10px;}
  .dish-item {padding: 6px 0;border-bottom: 1px solid #eee;}
  .footer-btn {display: block;width: 100%;background: #d84315;color: white;padding: 12px;font-size: 18px;margin-top: 20px;border: none;border-radius: 10px;}
  #popup {position: fixed;top: 10%;left: 10%;right: 10%;background: white;border: 2px solid #ff7043;border-radius: 10px;padding: 20px;display: none;z-index: 1000;}
  #popup h3 {color: #d84315;}
  #popup ul {padding-left: 20px;}
</style>
</head>
<body>

<h1>ğŸš å®¶å¸¸èœæ™ºèƒ½æ¨èåŠ©æ‰‹</h1>

<div id="step1" class="section">
  <h2>â‘  è¯·é€‰æ‹©ä»Šå¤©è¦åšå‡ èœå‡ æ±¤</h2>
  <div class="button-group" id="dishCountGroup">
    <button data-value="3èœ1æ±¤">ä¸‰èœä¸€æ±¤</button>
    <button data-value="4èœ1æ±¤">å››èœä¸€æ±¤</button>
    <button data-value="2èœ1æ±¤">ä¸¤èœä¸€æ±¤</button>
    <button data-value="3èœ0æ±¤">ä¸‰èœæ— æ±¤</button>
    <button data-value="4èœ0æ±¤">å››èœæ— æ±¤</button>
  </div>
</div>

<div id="step2" class="section" style="display:none;">
  <h2>â‘¡ æƒ³åƒä»€ä¹ˆè‚‰ç±»ï¼Ÿ</h2>
  <div class="button-group" id="meatGroup">
    <button data-value="çŒªè‚‰">çŒªè‚‰</button>
    <button data-value="ç‰›è‚‰">ç‰›è‚‰</button>
    <button data-value="é¸¡è‚‰">é¸¡è‚‰</button>
    <button data-value="é±¼è‚‰">é±¼è‚‰</button>
    <button data-value="é¸­è‚‰">é¸­è‚‰</button>
    <button data-value="ç´ èœ">ç´ èœ</button>
  </div>
</div>

<div id="step3" class="section" style="display:none;">
  <h2>â‘¢ æƒ³åƒä»€ä¹ˆå£å‘³ï¼Ÿ</h2>
  <div class="button-group" id="tasteGroup">
    <button data-value="å¾®è¾£">å¾®è¾£</button>
    <button data-value="é¦™è¾£">é¦™è¾£</button>
    <button data-value="å’¸é¦™">å’¸é¦™</button>
    <button data-value="æ¸…æ·¡">æ¸…æ·¡</button>
    <button data-value="éº»è¾£">éº»è¾£</button>
  </div>
</div>

<div id="step4" class="section" style="display:none;">
  <h2>â‘£ æ¨èä»Šæ—¥èœå•</h2>
  <div id="menuContainer" class="menu-list"></div>
  <button class="footer-btn" id="submitBtn">æäº¤ä»Šæ—¥èœå•</button>
</div>

<div id="popup">
  <h3>ğŸ›’ ä»Šæ—¥å¤‡èœæ¸…å•</h3>
  <div id="popupContent"></div>
  <button class="footer-btn" onclick="closePopup()">å…³é—­</button>
</div>

<script>
const recipes = {
  "çŒªè‚‰": {"å¾®è¾£": ["è¾£æ¤’ç‚’è‚‰", "é’æ¤’ç‚’äº”èŠ±", "è’œè–¹ç‚’è‚‰ç‰‡"],"é¦™è¾£": ["å›é”…è‚‰", "å¹²é”…äº”èŠ±è‚‰", "å‰æ¤’è’¸è‚‰é¥¼"],"å’¸é¦™": ["æ¢…èœæ‰£è‚‰", "é…±çˆ†è‚‰ä¸", "å†¬ç¬‹ç‚’è‚‰"],"éº»è¾£": ["éº»è¾£é¦™é”…", "é¦™å¹²ç‚’è‚‰"],"æ¸…æ·¡": ["è’¸çŒªè‚‰ä¸¸", "é¦™è‡ç˜¦è‚‰ç²¥"]},
  "ç‰›è‚‰": {"å¾®è¾£": ["é’æ¤’ç‚’ç‰›è‚‰", "å§œè‘±ç‚’ç‰›è‚‰"],"é¦™è¾£": ["å­œç„¶ç‰›è‚‰", "æ°´ç…®ç‰›è‚‰"],"å’¸é¦™": ["é…±çˆ†ç‰›æŸ³", "åœŸè±†ç‚–ç‰›è‚‰"],"æ¸…æ·¡": ["èåœç‚–ç‰›è…©"]},
  "é¸¡è‚‰": {"å¾®è¾£": ["è¾£å­é¸¡ä¸", "é¦™è¾£é¸¡å—"],"é¦™è¾£": ["å£æ°´é¸¡", "é»„ç„–é¸¡"],"å’¸é¦™": ["è‘±æ²¹é¸¡", "å•¤é…’é¸¡"],"éº»è¾£": ["éº»è¾£é¸¡ä¸", "é¦™é”…é¸¡å—"],"æ¸…æ·¡": ["æ¸…è’¸é¸¡è…¿", "è™«è‰èŠ±ç‚–é¸¡"]},
  "é±¼è‚‰": {"å¾®è¾£": ["å‰æ¤’é±¼å¤´", "é¦™ç…é²ˆé±¼"],"é¦™è¾£": ["é…¸èœé±¼", "éº»è¾£é±¼ç‰‡"],"å’¸é¦™": ["çº¢çƒ§é²«é±¼", "è±†è±‰è’¸é±¼"],"æ¸…æ·¡": ["æ¸…è’¸é²ˆé±¼", "é»„è±†èŠ½é±¼æ±¤"]},
  "é¸­è‚‰": {"å¾®è¾£": ["é’æ¤’ç‚’é¸­ç‰‡", "å•¤é…’é¸­"],"é¦™è¾£": ["è¾£å­é¸­", "å¹²é”…é¸­ç¿…"],"å’¸é¦™": ["æ¿é¸­ç‚’è’œè‹—", "çº¢çƒ§é¸­å—"],"æ¸…æ·¡": ["å§œä¸é¸­æ±¤"]},
  "ç´ èœ": {"å¾®è¾£": ["è¾£ç‚’åŒ…èœ", "å¹²ç…¸è±†è§’"],"é¦™è¾£": ["è’œè“‰ç©ºå¿ƒèœ", "éº»å©†è±†è…"],"å’¸é¦™": ["é¦™å¹²ç‚’èŠ¹èœ", "åœŸè±†ä¸ç‚’è›‹"],"æ¸…æ·¡": ["è¥¿çº¢æŸ¿ç‚’è›‹", "æ¸…ç‚’æ²¹éº¦èœ"]},
  "æ±¤": ["ç´«èœè›‹æ±¤", "å†¬ç“œæ’éª¨æ±¤", "ç•ªèŒ„è›‹æ±¤", "é»„è±†çŒªéª¨æ±¤", "è²è—•èŠ±ç”Ÿæ±¤"]
};

let selected = {count: "", meat: "", taste: ""};
let todayMenu = [];

function selectOption(groupId, key) {
  document.querySelectorAll(`#${groupId} button`).forEach(btn => btn.classList.remove("selected"));
  event.target.classList.add("selected");
  selected[key] = event.target.getAttribute("data-value");
  if (groupId === "dishCountGroup") document.getElementById("step2").style.display = "block";
  if (groupId === "meatGroup") document.getElementById("step3").style.display = "block";
  if (groupId === "tasteGroup") showMenu();
}

document.querySelectorAll("#dishCountGroup button").forEach(b => b.onclick = e => selectOption("dishCountGroup", "count"));
document.querySelectorAll("#meatGroup button").forEach(b => b.onclick = e => selectOption("meatGroup", "meat"));
document.querySelectorAll("#tasteGroup button").forEach(b => b.onclick = e => selectOption("tasteGroup", "taste"));

function showMenu() {
  const [dishCount, soupCount] = selected.count.match(/(\d)èœ(\d)æ±¤/).slice(1,3).map(Number);
  let dishes = recipes[selected.meat]?.[selected.taste] || [];
  let soups = recipes["æ±¤"];
  const lastMenu = JSON.parse(localStorage.getItem("lastMenu") || "[]");
  dishes = dishes.filter(d => !lastMenu.includes(d));
  soups = soups.filter(s => !lastMenu.includes(s));
  const pickRandom = (arr, n) => arr.sort(() => 0.5 - Math.random()).slice(0, n);
  todayMenu = pickRandom(dishes, dishCount);
  if (soupCount > 0) todayMenu = todayMenu.concat(pickRandom(soups, soupCount));
  document.getElementById("menuContainer").innerHTML = todayMenu.map(d => `<div class='dish-item'>âœ… ${d}</div>`).join("");
  document.getElementById("step4").style.display = "block";
}

document.getElementById("submitBtn").onclick = () => {
  localStorage.setItem("lastMenu", JSON.stringify(todayMenu));
  const ingredients = todayMenu.map(d => `- ${d}ï¼šä¸»è¦åŸæ–™è‹¥å¹²`).join("<br>");
  document.getElementById("popupContent").innerHTML = `<h4>ä»Šæ—¥èœå•ï¼š</h4><ul>${todayMenu.map(d=>"<li>"+d+"</li>").join("")}</ul><h4>åŸææ–™ï¼ˆå‚è€ƒå¤‡èœï¼‰ï¼š</h4>${ingredients}`;
  document.getElementById("popup").style.display = "block";
};

function closePopup() { document.getElementById("popup").style.display = "none"; }
</script>

</body>
</html>
